<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap" rel="stylesheet">
<title>Je t'aime étoilé</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    height: 100%;
    font-family: 'Brush Script MT', cursive;
    touch-action: manipulation; /* pour éviter les scrolls involontaires */
  }
  canvas {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    display: block;
  }

  /* Bouton adapté mobile */
  #musicBtn {
    position: absolute;
    bottom: 120px; /* un peu plus haut pour mobile */
    left: 50%;
    transform: translateX(-50%);
    width: 80px;
    height: 80px;
    border-radius: 50%;
    border: none;
    background: linear-gradient(145deg, #ff8aa0, #ff6f85); /* rose foncé */
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    z-index: 10;
    touch-action: manipulation;
  }

  /* Triangle "play" */
  #musicBtn::before {
    content: '';
    display: block;
    width: 0;
    height: 0;
    border-left: 24px solid white;
    border-top: 15px solid transparent;
    border-bottom: 15px solid transparent;
  }
</style>
</head>
<body>

<audio id="music" loop preload="auto">
  <source src="https://res.cloudinary.com/dejvzsdej/video/upload/v1755373731/Vid%C3%A9o_sans_titre_R%C3%A9alis%C3%A9e_avec_Clipchamp.mp3_online-audio-converter.com_uguqf7.mp3" type="audio/mpeg">
</audio>

<button id="musicBtn"></button>

<canvas id="stars"></canvas>

<script>
const music = document.getElementById('music');
const btn = document.getElementById('musicBtn');

btn.addEventListener('click', () => {
  music.play().catch(e => console.log("Musique bloquée :", e));
  btn.style.display = 'none'; // cache le bouton
});

// Canvas
const LOVE_LINES = [
  "Je t'aime","Je t'aime","I love you","I love you","Te amo","Ti amo","Ich liebe dich","Te quero",
  "Eu te amo","T'estimo","Jag älskar dig","Mahal kita","Saya cinta kamu","Je t'aime","I Love you",
  "Mon Amour","My Love","Mon Coeur"
];

// Tableau des URL d'images
const LOVE_IMAGES = [
  "https://res.cloudinary.com/dudmn5ldy/image/upload/v1755167093/IMG_6868_dwfm1h.jpg",
  "https://res.cloudinary.com/dudmn5ldy/image/upload/v1755167082/E7EE533D-8C55-443E-9A2C-2A9E54C21E81_bs6ht5.jpg",
  "https://res.cloudinary.com/dudmn5ldy/image/upload/v1755167032/IMG_0858_dzftew.jpg",
  "https://res.cloudinary.com/dudmn5ldy/image/upload/v1755167012/D9ECF464-36D5-4D7E-B7E2-215E3AA64E49_paofqw.jpg",
  "https://res.cloudinary.com/dudmn5ldy/image/upload/v1755167007/IMG_0084_v5gxvr.jpg",
  "https://res.cloudinary.com/dudmn5ldy/image/upload/v1755166928/IMG_2275_zicsiy.jpg",
  "https://res.cloudinary.com/dudmn5ldy/image/upload/v1755166926/IMG_2261_jxpexl.jpg",
  "https://res.cloudinary.com/dudmn5ldy/image/upload/v1755167036/_MGL3323_dlwmuy.jpg"
];


const canvas = document.getElementById("stars");
const ctx = canvas.getContext("2d");
let W, H;
let particles = [], imageParticles = [], starfield = [], shootingStars = [];

function resize() {
  W = window.innerWidth; 
  H = window.innerHeight;
  canvas.width = W; 
  canvas.height = H;
}
window.addEventListener("resize", resize);
resize();

// Classes Star, Particle, ShootingStar (même code que toi)

class Star { constructor() { this.reset(); } reset() { this.x = Math.random() * W; this.y = Math.random() * H; this.size = Math.random() * 2; this.speed = Math.random() * 0.5 + 0.2; } update() { this.y += this.speed; if (this.y > H) this.reset(); } draw() { ctx.fillStyle = 'white'; ctx.fillRect(this.x, this.y, this.size, this.size); } }

class Particle { 
  constructor(text) { 
    this.text = text; 
    this.reset();
  } 
  reset() {
    this.x = (Math.random()-0.5)*W; 
    this.y = (Math.random()-0.5)*H; 
    this.z = Math.random()*W*2+W; 
    this.size=25; 
    this.speed=20; 
  }
  update() { 
    this.z -= this.speed; 
    if(this.z<1){ 
      this.reset();
      this.text=LOVE_LINES[Math.floor(Math.random()*LOVE_LINES.length)];
    } 
  } 
  draw() { 
    const sx = (this.x/this.z)*W + W/2; 
    const sy = (this.y/this.z)*H + H/2; 
    const scale = W/this.z; 
    const opacity = Math.min(1,3-this.z/W); 
    let baseSize = 25; // taille de base
    let screenFactor = W <= 440 ? 0.75 : 1; // ajuste pour téléphones
    ctx.font = `${this.size * scale * screenFactor}px 'Dancing Script', cursive`;
    const colors = [ {r:255,g:160,b:120}, {r:255,g:200,b:80}, {r:255,g:215,b:100}, {r:255,g:180,b:120} ]; 
    const cycleDuration = 40000; 
    const time = (Date.now()%cycleDuration)/cycleDuration; 
    const index = Math.floor(time*colors.length); 
    const nextIndex = (index+1)%colors.length; 
    const t=(time*colors.length)%1; 
    const c1=colors[index], c2=colors[nextIndex]; 
    const r=c1.r+(c2.r-c1.r)*t; 
    const g=c1.g+(c2.g-c1.g)*t; 
    const b=c1.b+(c2.b-c1.b)*t; 
    ctx.fillStyle=`rgba(${r},${g},${b},${opacity})`; 
    ctx.textAlign="center"; 
    ctx.fillText(this.text,sx,sy); 
  } 
}

// Classe pour les images
class ImageParticle {
  constructor(imageSrc) {
    this.image = new Image();
    this.image.src = imageSrc;
    this.image.onload = () => {
      this.loaded = true;
    };
    this.reset();
  }
  
  reset() {
    this.x = (Math.random()-0.5)*W; 
    this.y = (Math.random()-0.5)*H; 
    this.z = Math.random()*W*2+W; 
    this.size = 100; // Taille de base de l'image
    this.speed = 20; 
  }
  
  update() {
    this.z -= this.speed; 
    if(this.z<1) {
      this.reset();
      this.image.src = LOVE_IMAGES[Math.floor(Math.random() * LOVE_IMAGES.length)];
    }
  }
  
  draw() {
    if (!this.loaded) return;
    
    const sx = (this.x/this.z)*W + W/2; 
    const sy = (this.y/this.z)*H + H/2; 
    const scale = W/this.z;
    const opacity = Math.min(1, 3 - this.z / W);
    
    ctx.save();
    ctx.globalAlpha = opacity;
    ctx.drawImage(this.image, sx - (this.size * scale) / 2, sy - (this.size * scale) / 2, this.size * scale, this.size * scale);
    ctx.restore();
  }
}


class ShootingStar { 
  constructor(){this.reset();} 
  reset(){ 
    this.x = Math.random()*W/2; 
    this.y = Math.random()*H/2; 
    this.len = Math.random()*80+50; 
    this.speed = Math.random()*10+6; 
    this.angle=Math.PI/4; 
    this.active = Math.random()<0.3; 
  } 
  update(){ 
    if(this.active){ 
      this.x += this.speed*Math.cos(this.angle); 
      this.y += this.speed*Math.sin(this.angle); 
      if(this.x>W||this.y>H) this.reset(); 
    } else { 
      if(Math.random()<0.003) this.active=true; 
    } 
  } 
  draw(){ 
    if(this.active){ 
      ctx.strokeStyle='white'; 
      ctx.beginPath(); 
      ctx.moveTo(this.x,this.y); 
      ctx.lineTo(this.x-this.len*Math.cos(this.angle),this.y-this.len*Math.sin(this.angle)); 
      ctx.stroke(); 
    } 
  } 
}

for(let i=0;i<200;i++) starfield.push(new Star());
for(let i=0;i<30;i++) particles.push(new Particle(LOVE_LINES[Math.floor(Math.random()*LOVE_LINES.length)]));
for(let i=0;i<1;i++) imageParticles.push(new ImageParticle(LOVE_IMAGES[Math.floor(Math.random()*LOVE_IMAGES.length)])); // MODIFIÉ : Seulement 1 image
for(let i=0;i<3;i++) shootingStars.push(new ShootingStar());

function animate(){
  const grad=ctx.createLinearGradient(0,0,0,H);
  grad.addColorStop(0,'#00003a');
  grad.addColorStop(1,'#000000');
  ctx.fillStyle=grad;
  ctx.fillRect(0,0,W,H);
  starfield.forEach(s=>{s.update();s.draw();});
  particles.forEach(p=>{p.update();p.draw();});
  imageParticles.forEach(ip=>{ip.update();ip.draw();});
  shootingStars.forEach(ss=>{ss.update();ss.draw();});
  requestAnimationFrame(animate);
}
animate();
</script>
</body>
</html>
